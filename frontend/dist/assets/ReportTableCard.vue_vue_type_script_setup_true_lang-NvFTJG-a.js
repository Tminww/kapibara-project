import{d as M,h as k,c as p,a as n,w as t,e,f as b,t as u,o as i,r as K,p as P,j as W,g as f,k as R,q as J,l as z,v as Q,x as U,m as w,y as j,F as E}from"./index-Dlkkv6Iw.js";import{m as B,b as L,f as F,a as X}from"./utils-DAVKSodD.js";const Y=c=>c.replace(/([-_][a-z])/g,d=>d.toUpperCase().replace("-","").replace("_","")),V=c=>d=>Array.isArray(d)?d.map(o=>typeof o=="object"?V(c)(o):o):Object.entries(d).reduce((o,[v,a])=>{const _=c(v);return _==="endTime"&&a===null?o[_]="":o[_]=a&&typeof a=="object"?Array.isArray(a)?a.map(r=>typeof r=="object"?V(c)(r):r):V(c)(a):a,o},{}),at=c=>V(Y)(c),Z={class:"mb-2"},st=M({__name:"StatsCard",props:{color:{},icon:{},amount:{},description:{}},setup(c){const d=c,o={check:"mdi-check-circle",alert:"mdi-alert-circle",info:"mdi-information",help:"mdi-help-circle",clock:"mdi-clock-outline"},v=k(()=>o[d.icon]);return(a,_)=>{const r=n("v-icon"),y=n("v-avatar"),g=n("v-card-text"),T=n("v-card");return i(),p(T,{class:"h-100",elevation:"3"},{default:t(()=>[e(g,{class:"text-center"},{default:t(()=>[e(y,{color:a.color,size:"60",class:"mb-4",variant:"tonal"},{default:t(()=>[e(r,{size:"32",icon:v.value},null,8,["icon"])]),_:1},8,["color"]),b("h2",Z,u(a.amount),1),b("p",null,u(a.description),1)]),_:1})]),_:1})}}}),lt=M({__name:"StatusCard",props:{title:{},status:{},message:{},progress:{},isRunning:{type:Boolean},startLoading:{type:Boolean},startTime:{},endTime:{},duration:{}},emits:["start","confirm"],setup(c,{emit:d}){const o=c,v=k(()=>B[o.status]?B[o.status]:"grey"),a=k(()=>L[o.status]?L[o.status]:"    "),_=K(0);let r;const y=k(()=>o.startTime?o.endTime?o.duration||0:_.value:0),g=()=>{if(!o.startTime)return;const s=new Date(o.startTime),m=new Date;_.value=Math.floor((m.getTime()-s.getTime())/1e3)},T=()=>{r&&clearInterval(r),o.isRunning&&(g(),r=setInterval(g,1e3))};return P(()=>o.status,(s,m)=>{s==="STARTED"||s==="PROGRESS"?T():r&&clearInterval(r)}),W(()=>{r&&clearInterval(r)}),(s,m)=>{const h=n("v-spacer"),$=n("v-chip"),D=n("v-card-title"),x=n("v-progress-linear"),A=n("v-alert"),C=n("v-icon"),l=n("v-list-item-title"),S=n("v-list-item"),H=n("v-list"),O=n("v-card-text"),N=n("v-btn"),q=n("v-card-actions"),G=n("v-card");return i(),p(G,{class:"d-flex flex-column",style:{height:"100%"},elevation:"3"},{default:t(()=>[e(D,{class:"d-flex align-center"},{default:t(()=>[b("span",null,u(s.title),1),e(h),e($,{color:v.value,label:"",class:"ml-2"},{default:t(()=>[f(u(s.status),1)]),_:1},8,["color"])]),_:1}),e(O,{class:"flex-grow-1"},{default:t(()=>[s.isRunning?(i(),p(x,{key:0,"model-value":s.progress,color:"primary",height:"25",rounded:"","rounded-bar":""},{default:t(({value:I})=>[b("strong",{style:J({color:Math.ceil(I)>50?"white":"black"})},u(Math.ceil(I))+"%",5)]),_:1},8,["model-value"])):R("",!0),e(A,{color:v.value,icon:a.value,variant:"tonal",class:"mt-2",title:"Статус выполнения",text:s.message},null,8,["color","icon","text"]),s.startTime?(i(),p(H,{key:1,density:"compact"},{default:t(()=>[e(S,null,{prepend:t(()=>[e(C,{icon:"mdi-clock-start"})]),default:t(()=>[e(l,null,{default:t(()=>[f("Начало: "+u(z(F)(s.startTime)),1)]),_:1})]),_:1}),s.endTime?(i(),p(S,{key:0},{prepend:t(()=>[e(C,{icon:"mdi-clock-end"})]),default:t(()=>[e(l,null,{default:t(()=>[f("Окончание: "+u(z(F)(s.endTime)),1)]),_:1})]),_:1})):R("",!0),s.duration?(i(),p(S,{key:1},{prepend:t(()=>[e(C,{icon:"mdi-timer"})]),default:t(()=>[e(l,null,{default:t(()=>[f("Длительность: "+u(z(X)(y.value)),1)]),_:1})]),_:1})):R("",!0)]),_:1})):R("",!0)]),_:1}),e(q,{class:"px-4 py-4"},{default:t(()=>[e(N,{loading:s.startLoading,color:"primary",onClick:m[0]||(m[0]=I=>s.$emit("start")),disabled:s.isRunning,"prepend-icon":"mdi-play",variant:"tonal"},{default:t(()=>m[2]||(m[2]=[f(" Начать ")])),_:1},8,["loading","disabled"]),e(h),e(N,{color:"error",onClick:m[1]||(m[1]=I=>s.$emit("confirm")),disabled:!s.isRunning,"prepend-icon":"mdi-stop",variant:"tonal"},{default:t(()=>m[3]||(m[3]=[f(" Остановить ")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),rt=M({__name:"HistoryTableCard",props:{historyLimit:{default:20}},emits:["update"],setup(c,{emit:d}){Q();const o=K(c.historyLimit);return(v,a)=>{const _=n("v-spacer"),r=n("v-select"),y=n("v-card-title"),g=n("v-card-text"),T=n("v-card");return i(),p(T,{class:"h-100",elevation:"3"},{default:t(()=>[e(y,{class:"d-flex align-center"},{default:t(()=>[a[2]||(a[2]=b("span",null,"История запусков",-1)),e(_),e(r,{modelValue:o.value,"onUpdate:modelValue":[a[0]||(a[0]=s=>o.value=s),a[1]||(a[1]=s=>v.$emit("update",o.value))],items:[5,10,20,50],variant:"outlined",density:"compact","hide-details":"",style:{maxWidth:"120px"},color:"primary"},null,8,["modelValue"])]),_:1}),e(g,{class:"pb-0"},{default:t(()=>[U(v.$slots,"table")]),_:3})]),_:3})}}}),tt={key:1},et={key:1},ct=M({__name:"ReportTableCard",props:{status:{},message:{},stats:{}},setup(c){const d=c,o=k(()=>B[d.status]?B[d.status]:"grey"),v=k(()=>L[d.status]?L[d.status]:"mdi-information");return(a,_)=>{const r=n("v-spacer"),y=n("v-chip"),g=n("v-card-title"),T=n("v-alert"),s=n("v-icon"),m=n("v-list-item-title"),h=n("v-list-item"),$=n("v-list"),D=n("v-col"),x=n("v-row"),A=n("v-card-text"),C=n("v-card");return i(),p(C,{class:"h-100",elevation:"3"},{default:t(()=>[e(g,{class:"d-flex align-center"},{default:t(()=>[_[0]||(_[0]=b("span",null,"Отчет о выполнении",-1)),e(r),e(y,{color:o.value,label:"",class:"ml-2"},{default:t(()=>[f(u(a.status),1)]),_:1},8,["color"])]),_:1}),e(A,{class:"pb-0"},{default:t(()=>[e(T,{color:o.value,icon:v.value,variant:"tonal",title:"Статус выполнения",text:a.message},null,8,["color","icon","text"]),e(x,{"no-gutters":""},{default:t(()=>[e(D,{cols:"12",md:"6"},{default:t(()=>[e($,{density:"compact"},{default:t(()=>[(i(!0),w(E,null,j(a.stats.slice(0,Math.ceil(a.stats.length/2)),(l,S)=>(i(),p(h,{key:l.name},{prepend:t(()=>[e(s,{icon:l.icon},null,8,["icon"])]),default:t(()=>[e(m,null,{default:t(()=>[f(u(l.name)+": ",1),l.color?(i(),p(y,{key:0,color:l.color,label:""},{default:t(()=>[f(u(l.value),1)]),_:2},1032,["color"])):(i(),w("span",tt,u(l.value),1))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(D,{cols:"12",md:"6"},{default:t(()=>[e($,{density:"compact"},{default:t(()=>[(i(!0),w(E,null,j(a.stats.slice(Math.ceil(a.stats.length/2)),(l,S)=>(i(),p(h,{key:l.name},{prepend:t(()=>[e(s,{icon:l.icon},null,8,["icon"])]),default:t(()=>[e(m,null,{default:t(()=>[f(u(l.name)+": ",1),l.color?(i(),p(y,{key:0,color:l.color,label:""},{default:t(()=>[f(u(l.value),1)]),_:2},1032,["color"])):(i(),w("span",et,u(l.value),1))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),U(a.$slots,"table")]),_:3})]),_:3})}}});export{lt as _,st as a,rt as b,at as c,ct as d};
