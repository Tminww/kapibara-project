import{d as V,r,c as k,w as p,a,u as C,b as L,o as B,e as n,f as v,g as N,s as h,_ as z}from"./index-Dlkkv6Iw.js";import{a as E}from"./index-DHjOUhyH.js";const I=V({__name:"LoginPage",setup(P){const f=C(),_=L(),s=r(!1),l=r(""),t=r(""),i=r(!1),u=r(!1),d=r(!1),g=async()=>{if(i.value=!l.value,u.value=!t.value,!i.value&&!u.value){d.value=!0;try{const o=await E.auth.login({username:l.value,password:t.value});o.error?console.error("Login error:",o.error):(h.value={username:o.username,role:o.role,token:o.token},f.push({name:_.query.redirect||"home"}))}catch(o){console.error("Login failed:",o)}finally{d.value=!1}}};return(o,e)=>{const m=a("v-text-field"),y=a("v-progress-circular"),w=a("v-btn"),x=a("v-card"),b=a("v-container");return B(),k(b,{class:"d-flex align-center justify-center h-100"},{default:p(()=>[n(x,{class:"pa-8",elevation:"3","min-width":"450","max-width":"500"},{default:p(()=>[e[4]||(e[4]=v("h3",{class:""},"Логин",-1)),n(m,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=c=>l.value=c),density:"compact",placeholder:"Имя пользователя","prepend-inner-icon":"mdi-account",variant:"outlined",color:"primary",error:i.value,"error-messages":i.value?"Введите имя пользователя":""},null,8,["modelValue","error","error-messages"]),e[5]||(e[5]=v("h3",{class:""},"Пароль",-1)),n(m,{modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=c=>t.value=c),"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:"Введите пароль","prepend-inner-icon":"mdi-lock",variant:"outlined",color:"primary",error:u.value,"error-messages":u.value?"Введите пароль":"","onClick:appendInner":e[2]||(e[2]=c=>s.value=!s.value)},null,8,["modelValue","append-inner-icon","type","error","error-messages"]),n(w,{class:"my-4",color:"primary",size:"large",variant:"tonal",block:"",loading:d.value,disabled:d.value,onClick:g},{loader:p(()=>[n(y,{indeterminate:"",color:"white",size:"20"})]),default:p(()=>[e[3]||(e[3]=N(" Войти "))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})}}}),j=z(I,[["__scopeId","data-v-31fd9b1a"]]);export{j as default};
